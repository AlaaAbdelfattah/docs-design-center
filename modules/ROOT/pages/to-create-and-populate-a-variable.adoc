= Store and Reuse Data from the Output of a Card (Flow Designer)
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

:imagesdir: ../assets/images

You can use a Set Variable card to create a variable that stores data from the output of a card. You can then reuse that data in a later card by using the variable.

For example, in the tutorial xref::salesforce-to-twilio.adoc[Create Your First Mule Application with Flow Designer], you used a Set Variable card after the trigger card, so that you could save the trigger card's payload. The reason was that you needed to use information from the payload after using the Choice router, and none of the three possible outputs from the Choice router would preserve that information.

.The Set Variable card from the tutorial
image::fd-set-var-oppdetails.png[]

Where you used the variable, which you named `OppDetails`, was in the Transform card that followed the Choice router.

.The Transform card that followed the Choice router, with the variable `OppDetails` highlighted
image::fd-set-var-transform.png[]

The Set Variable component is for creating or updating a variable to store values for use within the flow of a Mule app. You can store simple literal values such as strings or messages, message payloads, or attribute objects. For example, you might store the original payload of a message (before it is processed) so you can use it later in the flow or within an error handler.

For more information, see "About Set Variable", which is linked to from the *See also* section at the end of this topic.

When a variable is no longer needed in a flow, you can remove the variable with the Remove Variable component.

The Set Variable (`set-variable`) component is for creating or updating a variable to store values for use within the flow of a Mule app. You can store simple literal values such as strings or messages, message payloads, or attribute objects. For example, you might store the original payload of a message (before it is processed) so you can use it later in the flow or within an error handler.

The `set-variable` component is not recommended for complex expressions or transformations. You should instead use it for simple ones, such as selections, and use the xref:transform-component-about.adoc[Transform Component]
for complex scenarios.

== Procedure

. Click the plus icon that follows the card that outputs the data you want to store and reuse.
. Add a Set Variable card.
. Specify a name for the variable. Names can include only numbers, characters, and underscores.
. Specify a value for the variable.
* If you want to specify a string value, ensure that the *f(x)* button appears to the right of the *Value* field. The presence of this button means that the field is in string mode, not function mode. You can type directly into the *Value* field.
+
.The *Value* field in string mode, highlighted in the Set Variable card
image::fd-set-var-value-field-smode.png[]

* If you want to specify a DataWeave expression, ensure that `f(x)` appears in the right side of the *Value* field. The presence of `f(x)` means that the field is in expression mode. Clicking in the field opens the *Custom Expression* dialog, where you can compose an expression with the help of the *Add data* and *Add functions* panes on the right.
+
.The *Value* field in expression mode, highlighted in the Set Variable card
image::fd-set-var-value-field-fmode.png[]
+
.The Custom Expression window and its panes
image::fd-set-var-custom-expression-dialog.png[]







== Examples

This example sets the variable to a string:

* Name = `myVar`
* Value = `my first variable`

This example sets the variable by using a DataWeave operation that results in a value of `5`:

* Name = `myVar`
* Value = `max([1,2,3] ++ [3,4,5])`

This example sets the variable to the message payload:

* Name = `myVar`
* Value = `payload`

This example sets the variable to the message attributes:

* Name = `myVar`
* Value = `attributes`

This example sets the variable to the entire message:

* Name = `myVar`
* Value = `message`

These examples set the variable to a Boolean value, `true`:

* Name = `myVar`
* Value =
** `true`
** `true as Boolean`
** `(1 + 1 == 2)` evaluates to `true`


== Accessing Variables in Other Event Processors
Set Variable sets a variable in the current Mule event, and the variables then travel with the Mule event to downstream event processors. You can access any variable with DataWeave using `vars`. So if you set a variable named lastMessage, you can access it as `vars.lastMessage`.  You can set variables in a Transform Message component, and also many connectors and event processors have a Target that can be set in the Advanced tab. These all set flow variables and they are accessed the same way, through the keyword `vars.`.



== See also

* xref::fd-store-data-top.adoc[Store and Reuse Data within a Flow]
